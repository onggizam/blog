# 여러 쿠버네티스 클러스터를 오가며 – 내가 불편함을 해결한 방식

쿠버네티스를 쓰다 보면 클러스터가 하나로 끝나지 않는다.

- 사내 배포용 클러스터
- 테스트 클러스터
- 개인 실험용 클러스터

점점 많아지면서 매번 `~/.kube/config` 파일을 바꿔가며 쓰는 일이 일상이 되었다.

## 불편함의 본질

처음엔 단순히 `cp`로 덮어쓰거나, 파일 이름을 바꿔가며 관리했다.
하지만 이 방식은 두 가지 문제를 만들었다.

1. **귀찮음** – 매번 경로를 기억하고 명령어를 쳐야 했다.
2. **실수 위험** – 잘못 덮어쓰면 원래 쓰던 config를 날려먹거나, 다른 클러스터에 잘못 배포하는 사고로 이어질 수 있다.

사소한 번거로움이 쌓이다 보니, “이건 도구로 풀어야겠다”라는 생각이 들었다.

## 그래서 만든 도구, mcc

결국 나는 직접 CLI를 하나 만들었다. 이름은 **mcc(Multi Cluster Changer)**.
아이디어는 단순하다.

> 여러 개의 kubeconfig를 등록해두고, 명령어 하나로 스위칭하자.

### 설치 방법

Homebrew를 쓰면 바로 설치할 수 있다.

```bash
brew tap onggizam/mcc
brew install mcc
```

직접 빌드하고 싶다면:

```bash
git clone https://github.com/onggizam/mcc.git
cd mcc
bash scripts/build.sh
```

## 사용 예시

사용법은 직관적으로 만들었다.

- 클러스터 config 추가

```bash
mcc add -f ./myconfig -n cluster1
```

- 클러스터 전환

```bash
mcc ch cluster1
```

- 등록된 리스트 확인

```bash
mcc list
```

- 삭제

```bash
mcc delete cluster1
```

버전 확인도 가능하다:

```bash
mcc version
```

## 써보니 달라진 점

사실 처음엔 단순히 **내 귀찮음을 줄이려고** 만든 도구였다.
하지만 써보니 다음과 같은 효과가 있었다.

- 실수할 가능성이 크게 줄었다.
- 여러 클러스터를 운영하는 스트레스가 줄었다.
- 동료들에게도 공유했더니 반응이 좋았다.

무엇보다 “이제 내가 어떤 클러스터를 보고 있는지” 명확하게 알 수 있다는 점이 가장 크다.

## 마무리

쿠버네티스 멀티클러스터 운영은 생각보다 빠르게 찾아오는 현실이다.
그때마다 불편함을 참고 쓰는 대신, **스스로 도구를 만들어 해결**하는 경험은 운영자로서 큰 자산이라고 생각한다.

mcc는 거창한 솔루션은 아니다. 하지만 나 같은 상황에 놓인 사람이라면, 작은 불편을 크게 줄여줄 수 있는 도구라고 생각한다.
